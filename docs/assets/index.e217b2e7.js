var d=Object.defineProperty;var l=(a,e,t)=>e in a?d(a,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[e]=t;var s=(a,e,t)=>(l(a,typeof e!="symbol"?e+"":e,t),t);import{p as c,P as o}from"./vendor.0ccebc17.js";const g=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const h of i)if(h.type==="childList")for(const n of h.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&r(n)}).observe(document,{childList:!0,subtree:!0});function t(i){const h={};return i.integrity&&(h.integrity=i.integrity),i.referrerpolicy&&(h.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?h.credentials="include":i.crossorigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(i){if(i.ep)return;i.ep=!0;const h=t(i);fetch(i.href,h)}};g();var p="./assets/bird.5d3dd284.png",y="./assets/nest.52240280.png",f="./assets/cats.f4280fcb.png",u="./assets/apple.1e057a9a.png";class m extends c.exports.Scene{constructor(){super("BootloaderScene")}preload(){this.load.image("bird",p),this.load.image("nest",y),this.load.image("apple",u),this.load.spritesheet("cats",f,{frameWidth:64,frameHeight:64}),this.load.on("complete",()=>{this.scene.start("MainScene")})}}class b extends o.GameObjects.Rectangle{constructor(e,t,r){super(e,t,r,e.game.canvas.width*2,200,5635925);this.scene.add.existing(this),this.setOrigin(.5,0)}}class x extends Phaser.Physics.Arcade.Sprite{constructor(e,t,r){super(e,t,r,"bird");s(this,"leftWing");s(this,"rightWing");s(this,"canFlapLeft",!0);s(this,"canFlapRight",!0);s(this,"flapStrength",-300);s(this,"flapSideStrength",100);s(this,"energy",100);this.scene.add.existing(this),this.scene.physics.add.existing(this),this.leftWing=this.scene.add.rectangle(this.body.x,this.body.y,16,16,6527999),this.rightWing=this.scene.add.rectangle(this.body.x,this.body.y,16,16,6527999),this.setDragX(200)}update(){this.updateWingsPosition()}flapWing(e,t){this.scene.add.tween({targets:e,displayHeight:{from:16,to:8},yoyo:!0,duration:100,ease:Phaser.Math.Easing.Quadratic.InOut,onComplete:()=>{this.decreaseEnergy(),t()}})}flapLeft(){this.canFlapLeft&&(this.canFlapLeft=!1,this.setVelocity(-this.flapSideStrength,this.getFlapStrength()),this.flapWing(this.leftWing,()=>{this.canFlapLeft=!0}))}flapRight(){this.canFlapRight&&(this.canFlapRight=!1,this.setVelocity(this.flapSideStrength,this.getFlapStrength()),this.flapWing(this.rightWing,()=>{this.canFlapRight=!0}))}updateWingsPosition(){this.leftWing.y=this.y,this.leftWing.x=this.x-32,this.rightWing.y=this.y,this.rightWing.x=this.x+32}getFlapStrength(){return this.flapStrength*(this.energy/100)}decreaseEnergy(){this.energy--,this.energy<=30&&(this.energy=30)}increaseEnergy(){this.energy++,this.energy>=100&&(this.energy=100)}getEnergy(){return this.energy}}class P extends o.Physics.Arcade.Sprite{constructor(e,t,r){super(e,t,r,"nest");this.scene.add.existing(this),this.scene.physics.add.existing(this,!0),this.setImmovable(!0),this.body.checkCollision.down=!1,this.body.checkCollision.left=!1,this.body.checkCollision.right=!1}}class S{constructor(e,t,r,i){s(this,"scene");s(this,"x");s(this,"y");s(this,"size");s(this,"nests");this.scene=e,this.x=t,this.y=r,this.size=i,this.createNests(),this.createTrunk()}createTrunk(){for(let e=0;e<this.size;e++){const t=this.x,r=this.y-e*64;this.scene.add.rectangle(t,r,256,64,13408614),Math.random()<.3&&this.createBranch(e)}}createBranch(e){const t=this.x-Phaser.Math.Between(-256,256),r=this.y-e*64,i=Phaser.Math.Between(64,128);this.scene.add.rectangle(t,r,256,i,13408614);const h=new P(this.scene,t,r);this.nests.add(h)}createNests(){this.nests=this.scene.physics.add.staticGroup()}getNests(){return this.nests}}class w{constructor(e){s(this,"scene");s(this,"height");this.scene=e,this.height=480,this.scene.time.addEvent({repeat:-1,delay:1e3,callback:()=>{this.createCat(),this.height-=32}})}createCat(){const e=this.height;for(let t=0;t<30;t++){const r=Phaser.Math.Between(-300,300),i=Phaser.Math.Between(1,4),h=this.scene.physics.add.sprite(r,e,"cats",i);h.setImmovable(!0),h.body.allowGravity=!1}}getHeight(){return this.height}}class K extends Phaser.Physics.Arcade.Sprite{constructor(e,t,r){super(e,t,r,"apple");this.scene.add.existing(this),this.scene.physics.add.existing(this)}}class L extends c.exports.Scene{constructor(){super("MainScene");s(this,"solidGroup");s(this,"leftKey");s(this,"rightKey");s(this,"bird");s(this,"tree");s(this,"catLayer");s(this,"apples");s(this,"leftKeyPressed",!1);s(this,"rightKeyPressed",!1)}update(){this.bird.update(),this.checkColissions(),this.checkCatLayer(),this.leftKey.isDown&&!this.leftKeyPressed&&(this.leftKeyPressed=!0,this.bird.flapLeft()),this.rightKey.isDown&&!this.rightKeyPressed&&(this.rightKeyPressed=!0,this.bird.flapRight()),this.leftKey.isUp&&(this.leftKeyPressed=!1),this.rightKey.isUp&&(this.rightKeyPressed=!1),console.log("Energy: "+this.bird.getEnergy().toString())}create(){this.createTree(),this.apples=this.physics.add.group({classType:K}),this.bird=new x(this,0,100),this.cameras.main.startFollow(this.bird),this.cameras.main.setBackgroundColor(13434879),this.leftKey=this.input.keyboard.addKey("left"),this.rightKey=this.input.keyboard.addKey("right"),this.createSolidGroup(),this.catLayer=new w(this),this.time.addEvent({repeat:-1,delay:2e3,callback:()=>{this.createApple()}})}createSolidGroup(){this.solidGroup=this.physics.add.staticGroup(),this.solidGroup.add(new b(this,0,this.game.canvas.height))}createTree(){this.tree=new S(this,0,this.game.canvas.height,20)}checkColissions(){this.physics.collide(this.solidGroup,this.bird),this.physics.collide(this.bird,this.tree.getNests(),()=>{this.bird.body.touching.down&&this.bird.increaseEnergy()}),this.physics.collide(this.apples,this.solidGroup,e=>{console.log("chay manz"),e.destroy(!0)}),this.physics.collide(this.apples,this.bird)}checkCatLayer(){this.bird.y>this.catLayer.getHeight()&&this.scene.restart()}createApple(){const e=Phaser.Math.Between(-300,300),t=this.bird.y-400;this.apples.create(e,t)}}new c.exports.Game({type:Phaser.AUTO,width:640,height:480,physics:{default:"arcade",arcade:{gravity:{y:900}}},scene:[m,L]});
