var o=Object.defineProperty;var l=(h,e,t)=>e in h?o(h,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):h[e]=t;var s=(h,e,t)=>(l(h,typeof e!="symbol"?e+"":e,t),t);import{p as n,P as d}from"./vendor.0ccebc17.js";const g=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerpolicy&&(a.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?a.credentials="include":i.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}};g();class p extends n.exports.Scene{constructor(){super("MainHud");s(this,"leftArea");s(this,"rightArea");s(this,"bird")}setBird(e){this.bird=e}create(){this.add.text(10,10,"HOLA MUNDO",{color:"black"}),this.leftArea=this.add.zone(0,0,this.game.canvas.width/2,this.game.canvas.height).setOrigin(0),this.rightArea=this.add.zone(this.game.canvas.width/2,0,this.game.canvas.width/2,this.game.canvas.height).setOrigin(0),this.leftArea.setInteractive(),this.rightArea.setInteractive(),this.leftArea.on("pointerdown",()=>{this.bird.flapLeft()}),this.rightArea.on("pointerdown",()=>{this.bird.flapRight()})}}var y="./assets/bird.5d3dd284.png",f="./assets/nest.52240280.png",u="./assets/cats.f4280fcb.png",b="./assets/apple.1e057a9a.png";class m extends n.exports.Scene{constructor(){super("BootloaderScene")}preload(){this.load.image("bird",y),this.load.image("nest",f),this.load.image("apple",b),this.load.spritesheet("cats",u,{frameWidth:64,frameHeight:64}),this.load.on("complete",()=>{this.scene.start("MainScene")})}}class x extends d.GameObjects.Rectangle{constructor(e,t,r){super(e,t,r,e.game.canvas.width*2,200,5635925);this.scene.add.existing(this),this.setOrigin(.5,0)}}class P extends Phaser.Physics.Arcade.Sprite{constructor(e,t,r){super(e,t,r,"bird");s(this,"leftWing");s(this,"rightWing");s(this,"canFlapLeft",!0);s(this,"canFlapRight",!0);s(this,"flapStrength",-300);s(this,"flapSideStrength",100);s(this,"energy",100);this.scene.add.existing(this),this.scene.physics.add.existing(this),this.leftWing=this.scene.add.rectangle(this.body.x,this.body.y,16,16,6527999),this.rightWing=this.scene.add.rectangle(this.body.x,this.body.y,16,16,6527999),this.setDragX(200)}update(){this.updateWingsPosition()}flapWing(e,t){this.scene.add.tween({targets:e,displayHeight:{from:16,to:8},yoyo:!0,duration:100,ease:Phaser.Math.Easing.Quadratic.InOut,onComplete:()=>{this.decreaseEnergy(),t()}})}flapLeft(){this.canFlapLeft&&(this.canFlapLeft=!1,this.setVelocity(-this.flapSideStrength,this.getFlapStrength()),this.flapWing(this.leftWing,()=>{this.canFlapLeft=!0}))}flapRight(){this.canFlapRight&&(this.canFlapRight=!1,this.setVelocity(this.flapSideStrength,this.getFlapStrength()),this.flapWing(this.rightWing,()=>{this.canFlapRight=!0}))}updateWingsPosition(){this.leftWing.y=this.y,this.leftWing.x=this.x-32,this.rightWing.y=this.y,this.rightWing.x=this.x+32}getFlapStrength(){return this.flapStrength*(this.energy/100)}decreaseEnergy(){this.energy--,this.energy<=30&&(this.energy=30)}increaseEnergy(){this.energy++,this.energy>=100&&(this.energy=100)}getEnergy(){return this.energy}}class w extends d.Physics.Arcade.Sprite{constructor(e,t,r){super(e,t,r,"nest");this.scene.add.existing(this),this.scene.physics.add.existing(this,!0),this.setImmovable(!0),this.body.checkCollision.down=!1,this.body.checkCollision.left=!1,this.body.checkCollision.right=!1}}class S{constructor(e,t,r,i){s(this,"scene");s(this,"x");s(this,"y");s(this,"size");s(this,"nests");this.scene=e,this.x=t,this.y=r,this.size=i,this.createNests(),this.createTrunk()}createTrunk(){for(let e=0;e<this.size;e++){const t=this.x,r=this.y-e*64;this.scene.add.rectangle(t,r,256,64,13408614),Math.random()<.3&&this.createBranch(e)}}createBranch(e){const t=this.x-Phaser.Math.Between(-256,256),r=this.y-e*64,i=Phaser.Math.Between(64,128);this.scene.add.rectangle(t,r,256,i,13408614);const a=new w(this.scene,t,r);this.nests.add(a)}createNests(){this.nests=this.scene.physics.add.staticGroup()}getNests(){return this.nests}}class K extends Phaser.Physics.Arcade.Sprite{constructor(e,t,r){super(e,t,r,"apple");this.scene.add.existing(this),this.scene.physics.add.existing(this)}}class v extends n.exports.Scene{constructor(){super("MainScene");s(this,"solidGroup");s(this,"leftKey");s(this,"rightKey");s(this,"bird");s(this,"tree");s(this,"catLayer");s(this,"apples");s(this,"leftKeyPressed",!1);s(this,"rightKeyPressed",!1)}update(){this.bird.update(),this.checkColissions(),this.leftKey.isDown&&!this.leftKeyPressed&&(this.leftKeyPressed=!0,this.bird.flapLeft()),this.rightKey.isDown&&!this.rightKeyPressed&&(this.rightKeyPressed=!0,this.bird.flapRight()),this.leftKey.isUp&&(this.leftKeyPressed=!1),this.rightKey.isUp&&(this.rightKeyPressed=!1),console.log("Energy: "+this.bird.getEnergy().toString())}create(){this.createTree(),this.apples=this.physics.add.group({classType:K}),this.bird=new P(this,0,-100),this.cameras.main.startFollow(this.bird),this.cameras.main.setBackgroundColor(13434879),this.leftKey=this.input.keyboard.addKey("left"),this.rightKey=this.input.keyboard.addKey("right"),this.createSolidGroup(),this.time.addEvent({repeat:-1,delay:2e3,callback:()=>{this.createApple()}}),this.scene.launch("MainHud"),this.scene.get("MainHud").setBird(this.bird)}createSolidGroup(){this.solidGroup=this.physics.add.staticGroup(),this.solidGroup.add(new x(this,0,0))}createTree(){this.tree=new S(this,0,0,40)}checkColissions(){this.physics.collide(this.solidGroup,this.bird),this.physics.collide(this.bird,this.tree.getNests(),()=>{this.bird.body.touching.down&&this.bird.increaseEnergy()}),this.physics.collide(this.apples,this.solidGroup,e=>{console.log("chay manz"),e.destroy(!0)}),this.physics.collide(this.apples,this.bird)}checkCatLayer(){this.bird.y>this.catLayer.getHeight()&&this.scene.restart()}createApple(){const e=Phaser.Math.Between(-300,300),t=this.bird.y-400;this.apples.create(e,t)}}new n.exports.Game({type:Phaser.AUTO,width:window.innerWidth,height:window.innerHeight,physics:{default:"arcade",arcade:{gravity:{y:900}}},scene:[m,v,p]});
